{"version":3,"file":"index.module.js","sources":["../../src/index.js"],"sourcesContent":["const calcTransformation = (source, target) => {\n  return {\n    x: source.offsetLeft - target.offsetLeft,\n    y: source.offsetTop - target.offsetTop,\n    scaleY: target.offsetHeight / source.offsetHeight,\n    scaleX: target.offsetWidth / source.offsetWidth,\n  };\n};\n\nconst getEffectedStyles = (element, properties) => {\n  const computedStyle = window.getComputedStyle(element);\n  return properties.reduce((styles, prop) => {\n    styles[prop] = computedStyle[prop];\n    return styles;\n  }, {});\n};\n\nexport const createMorphable = (\n  source,\n  target,\n  {\n    duration = 1,\n    timingFunction = '',\n    effectedCssProperties = ['background-color', 'border-radius', 'border'],\n  } = {}\n) => {\n  const targetStyles = getEffectedStyles(target, effectedCssProperties);\n  const sourceStyles = getEffectedStyles(source, effectedCssProperties);\n  const transformation = calcTransformation(source, target);\n\n  source.innerHTML = `<div>${source.innerHTML}</div>`;\n  const contentWrapper = source.children[0];\n\n  source.style.transformOrigin = 'top left';\n  target.style.visibility = 'hidden';\n\n  return {\n    morph() {\n      source.style.transition = `${['transform', ...effectedCssProperties].join(\n        ` ${duration}s ${timingFunction},`\n      )}, opacity ${duration}s ${duration * 1.5}s, visibility 0s ${\n        duration * 1.5 + duration\n      }s`;\n\n      contentWrapper.style.transition = `opacity ${\n        duration * 0.5\n      }s ${timingFunction}`;\n\n      target.style.transition = `opacity ${duration}s ${duration}s, visibility 0s ${duration}s`;\n\n      source.style.transform = `translate(${-transformation.x}px, ${-transformation.y}px) scale(${\n        transformation.scaleX\n      }, ${transformation.scaleY})`;\n      source.style.opacity = '0';\n      source.style.visibility = 'hidden';\n\n      effectedCssProperties.forEach(\n        (prop) => (source.style[prop] = targetStyles[prop])\n      );\n\n      contentWrapper.style.opacity = '0';\n\n      target.style.opacity = '1';\n      target.style.visibility = 'visible';\n    },\n    revert() {\n      source.style.transition = `${['transform', ...effectedCssProperties].join(\n        ` ${duration}s ${duration * 0.2}s ${timingFunction},`\n      )}, opacity 0s, visibility 0s`;\n\n      contentWrapper.style.transition = `opacity ${duration}s ${\n        duration * 0.5\n      }s ${timingFunction}`;\n\n      target.style.transition = `opacity ${duration * 0.2}s, visibility 0s ${\n        duration * 0.2\n      }s`;\n\n      source.style.transform = `translate(0px, 0px) scale(1, 1)`;\n      source.style.opacity = '1';\n      source.style.visibility = 'visible';\n\n      effectedCssProperties.forEach(\n        (prop) => (source.style[prop] = sourceStyles[prop])\n      );\n\n      contentWrapper.style.opacity = '1';\n\n      target.style.opacity = '0';\n      target.style.visibility = 'hidden';\n    },\n  };\n};\n\nexport const morph = (source, target, options) => {\n  createMorphable(source, target, options).morph();\n};\n"],"names":["getEffectedStyles","element","properties","computedStyle","window","getComputedStyle","reduce","styles","prop","createMorphable","source","target","duration","timingFunction","effectedCssProperties","targetStyles","sourceStyles","transformation","x","offsetLeft","y","offsetTop","scaleY","offsetHeight","scaleX","offsetWidth","calcTransformation","innerHTML","contentWrapper","children","style","transformOrigin","visibility","morph","transition","join","transform","opacity","forEach","revert","options"],"mappings":"AAAA,IASMA,EAAoB,SAACC,EAASC,GAClC,IAAMC,EAAgBC,OAAOC,iBAAiBJ,GAC9C,OAAOC,EAAWI,OAAO,SAACC,EAAQC,GAEhC,OADAD,EAAOC,GAAQL,EAAcK,GACtBD,GACN,KAGQE,EAAkB,SAC7BC,EACAC,sBAKI,SAHFC,SAAAA,aAAW,QACXC,eAAAA,aAAiB,SACjBC,sBAAAA,aAAwB,CAAC,mBAAoB,gBAAiB,YAG1DC,EAAef,EAAkBW,EAAQG,GACzCE,EAAehB,EAAkBU,EAAQI,GACzCG,EA5BmB,SAACP,EAAQC,GAClC,MAAO,CACLO,EAAGR,EAAOS,WAAaR,EAAOQ,WAC9BC,EAAGV,EAAOW,UAAYV,EAAOU,UAC7BC,OAAQX,EAAOY,aAAeb,EAAOa,aACrCC,OAAQb,EAAOc,YAAcf,EAAOe,aAuBfC,CAAmBhB,EAAQC,GAElDD,EAAOiB,kBAAoBjB,EAAOiB,mBAClC,IAAMC,EAAiBlB,EAAOmB,SAAS,GAKvC,OAHAnB,EAAOoB,MAAMC,gBAAkB,WAC/BpB,EAAOmB,MAAME,WAAa,SAEnB,CACLC,iBACEvB,EAAOoB,MAAMI,WAAgB,CAAC,oBAAgBpB,GAAuBqB,SAC/DvB,OAAaC,oBACLD,OAAwB,IAAXA,uBACd,IAAXA,EAAiBA,OAGnBgB,EAAeE,MAAMI,sBACR,GAAXtB,OACGC,EAELF,EAAOmB,MAAMI,sBAAwBtB,OAAaA,sBAA4BA,MAE9EF,EAAOoB,MAAMM,wBAA0BnB,EAAeC,UAASD,EAAeG,eAC5EH,EAAeO,YACZP,EAAeK,WACpBZ,EAAOoB,MAAMO,QAAU,IACvB3B,EAAOoB,MAAME,WAAa,SAE1BlB,EAAsBwB,QACpB,SAAC9B,UAAUE,EAAOoB,MAAMtB,GAAQO,EAAaP,KAG/CoB,EAAeE,MAAMO,QAAU,IAE/B1B,EAAOmB,MAAMO,QAAU,IACvB1B,EAAOmB,MAAME,WAAa,WAE5BO,kBACE7B,EAAOoB,MAAMI,WAAgB,CAAC,oBAAgBpB,GAAuBqB,SAC/DvB,OAAwB,GAAXA,OAAmBC,qCAGtCe,EAAeE,MAAMI,sBAAwBtB,OAChC,GAAXA,OACGC,EAELF,EAAOmB,MAAMI,sBAAmC,GAAXtB,sBACxB,GAAXA,MAGFF,EAAOoB,MAAMM,4CACb1B,EAAOoB,MAAMO,QAAU,IACvB3B,EAAOoB,MAAME,WAAa,UAE1BlB,EAAsBwB,QACpB,SAAC9B,UAAUE,EAAOoB,MAAMtB,GAAQQ,EAAaR,KAG/CoB,EAAeE,MAAMO,QAAU,IAE/B1B,EAAOmB,MAAMO,QAAU,IACvB1B,EAAOmB,MAAME,WAAa,YAKnBC,EAAQ,SAACvB,EAAQC,EAAQ6B,GACpC/B,EAAgBC,EAAQC,EAAQ6B,GAASP"}